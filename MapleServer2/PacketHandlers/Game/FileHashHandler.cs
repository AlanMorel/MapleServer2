using MaplePacketLib2.Tools;
using MapleServer2.Constants;
using MapleServer2.Extensions;
using MapleServer2.Servers.Game;
using Microsoft.Extensions.Logging;

namespace MapleServer2.PacketHandlers.Game
{
    public class FileHashHandler : GamePacketHandler
    {
        public override RecvOp OpCode => RecvOp.FILE_HASH;

        public FileHashHandler(ILogger<FileHashHandler> logger) : base(logger) { }

        public override void Handle(GameSession session, PacketReader packet)
        {
            packet.ReadInt();
            string filename = packet.ReadMapleString();
            string md5 = packet.ReadMapleString();

            Logger.Debug($"Hash for {filename}: {md5}");

            // My char info
            //session.Send("17 00 3E FF 5A 00 E1 0F 26 89 7F 98 3C 26 08 1E FC 14 85 18 3C 26 0C 00 34 00 34 00 34 00 35 00 35 00 35 00 36 00 36 00 36 00 37 00 37 00 37 00 01 01 00 00 00 00 00 00 00 00 00 00 00 00 41 75 19 03 41 75 19 03 A5 0F 01 00 01 00 00 00 32 00 00 00 F4 01 00 00 3D 00 00 00 3D 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 6D 83 BE FF 6D 83 BE FF EA 31 7C 5E 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 38 00 70 00 72 00 6F 00 66 00 69 00 6C 00 65 00 2F 00 65 00 32 00 2F 00 35 00 61 00 2F 00 32 00 37 00 35 00 35 00 31 00 30 00 34 00 30 00 33 00 31 00 39 00 30 00 35 00 36 00 38 00 35 00 30 00 30 00 30 00 2F 00 36 00 33 00 37 00 32 00 30 00 37 00 39 00 34 00 33 00 34 00 33 00 31 00 39 00 32 00 31 00 32 00 30 00 35 00 2E 00 70 00 6E 00 67 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 21 37 CC 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 F1 31 7C 5E 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 00 00 00 00 00 00 F4 01 00 00 01 32 00 00 00 23 00 00 05 38 A0 00 01 00 00 00 00 00 01 38 38 A0 00 01 00 00 00 00 00 00 7D 38 A0 00 01 00 00 00 00 00 00 D3 37 A0 00 01 00 00 00 00 00 01 39 38 A0 00 01 00 00 00 00 00 00 4B 38 A0 00 01 00 00 00 00 00 01 A1 37 A0 00 01 00 00 00 00 00 00 C3 38 A0 00 01 00 00 00 00 00 00 4C 38 A0 00 01 00 00 00 00 00 00 91 38 A0 00 01 00 00 00 00 00 01 0B 2D 31 01 01 00 00 00 00 00 00 4D 38 A0 00 01 00 00 00 00 00 00 5F 38 A0 00 01 00 00 00 00 00 00 B5 37 A0 00 01 00 00 00 00 00 00 4E 38 A0 00 01 00 00 00 00 00 00 2D 38 A0 00 01 00 00 00 00 00 00 60 38 A0 00 01 00 00 00 00 00 00 93 38 A0 00 01 00 00 00 00 00 00 FB 37 A0 00 01 00 00 00 00 00 00 61 38 A0 00 01 00 00 00 00 00 00 A5 38 A0 00 01 00 00 00 00 00 00 C9 37 A0 00 01 00 00 00 00 00 00 73 38 A0 00 01 00 00 00 00 00 00 FD 37 A0 00 01 00 00 00 00 00 00 30 38 A0 00 01 00 00 00 00 00 00 B9 38 A0 00 01 00 00 00 00 00 00 87 38 A0 00 01 00 00 00 00 00 01 01 2D 31 01 01 00 00 00 00 00 00 DD 37 A0 00 01 00 00 00 00 00 00 55 38 A0 00 01 00 00 00 00 00 01 AB 37 A0 00 01 00 00 00 00 00 00 F1 37 A0 00 01 00 00 00 00 00 00 BF 37 A0 00 01 00 00 00 00 00 00 E1 37 A0 00 01 00 00 00 00 00 01 37 38 A0 00 01 00 00 00 00 0E 00 00 E3 37 A0 00 01 00 00 00 00 00 00 AF 38 A0 00 01 00 00 00 00 00 00 19 38 A0 00 01 00 00 00 00 00 00 C4 38 A0 00 01 00 00 00 00 00 00 E7 37 A0 00 01 00 00 00 00 00 00 C5 38 A0 00 01 00 00 00 00 00 00 41 38 A0 00 01 00 00 00 00 00 01 0F 38 A0 00 01 00 00 00 00 00 00 88 38 A0 00 01 00 00 00 00 00 00 23 38 A0 00 01 00 00 00 00 00 00 DF 37 A0 00 01 00 00 00 00 00 00 9B 38 A0 00 01 00 00 00 00 00 00 E0 37 A0 00 01 00 00 00 00 00 00 69 38 A0 00 01 00 00 00 00 00 00 00 C0 28 C4 00 40 03 44 00 00 16 44 00 00 00 00 00 00 00 00 55 FF 33 42 00 23 3D 00 00 00 00 00 00 00 64 00 00 00 64 00 00 00 64 00 00 00 64 00 00 00 3D 00 00 00 00 00 00 00 64 00 00 00 64 00 00 00 64 00 00 00 64 00 00 00 3D 00 00 00 00 00 00 00 64 00 00 00 64 00 00 00 64 00 00 00 64 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 6D 83 BE FF 6D 83 BE FF 38 00 70 00 72 00 6F 00 66 00 69 00 6C 00 65 00 2F 00 65 00 32 00 2F 00 35 00 61 00 2F 00 32 00 37 00 35 00 35 00 31 00 30 00 34 00 30 00 33 00 31 00 39 00 30 00 35 00 36 00 38 00 35 00 30 00 30 00 30 00 2F 00 36 00 33 00 37 00 32 00 30 00 37 00 39 00 34 00 33 00 34 00 33 00 31 00 39 00 32 00 31 00 32 00 30 00 35 00 2E 00 70 00 6E 00 67 00 00 00 00 00 00 98 97 7C 5E 00 00 00 00 00 00 00 00 00 00 00 00 01 DE 00 00 00 00 00 06 93 78 9C 63 5B 68 BE 80 81 2F EF 8F 48 AB 84 8D 1A 13 83 2B 43 10 03 23 03 03 18 83 C0 7F 20 78 63 58 13 C7 40 26 00 E9 27 57 2F 69 80 91 2C F9 DF 8B 67 33 70 C2 7D EF 41 05 DF 27 5C 3C F4 FF 76 AB CF 7F B3 0C 87 FF BC 40 3E 13 44 D8 1E 8F 16 7C 72 34 06 E4 85 5A 9A D6 5C 06 2E 78 A8 B9 31 38 52 1C 6A 9A 2A 5B FF 3F 7E FC FD 3F 13 BB 08 38 BD 30 93 A2 99 6C 40 9E EF 05 37 CE 63 E0 46 F2 BD 0B 4D 72 CC B7 FA 65 76 7A 8C 15 36 31 FD 4E 76 E4 9A 45 1A 20 2F 34 CE 6B EE 62 E0 81 87 86 33 83 0F D5 73 10 17 29 9A C9 06 98 BE E3 43 95 67 E4 90 83 F8 92 87 C1 04 0C 4D C1 D0 0C 0C CD C1 10 1B 28 ED DA C4 C0 0B 0F 9F 60 60 19 33 1A 3E F8 CD 05 00 5B 54 74 66 00 01 00 00 00 00 00 01 00 00 00 00 01 00 3E FF 5A 00 A4 63 12 02 3E FF 5A 00 D0 71 85 28 D0 71 85 28 0F 38 A0 00 01 00 01 00 00 00 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 FF FF FF 7F 00 00 00 00 00 00 00 00 00 00 00".ToByteArray());
            //session.Send("17 00 3E FF 5A 00 E1 0F 26 89 7F 98 3C 26 08 1E FC 14 85 18 3C 26 0C 00 34 00 34 00 34 00 35 00 35 00 35 00 36 00 36 00 36 00 37 00 37 00 37 00 01 01 00 00 00 00 00 00 00 00 00 00 00 00 41 75 19 03 41 75 19 03 A5 0F 01 00 01 00 00 00 32 00 00 00 F4 01 00 00 3D 00 00 00 3D 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 6D 83 BE FF 6D 83 BE FF EA 31 7C 5E 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 38 00 70 00 72 00 6F 00 66 00 69 00 6C 00 65 00 2F 00 65 00 32 00 2F 00 35 00 61 00 2F 00 32 00 37 00 35 00 35 00 31 00 30 00 34 00 30 00 33 00 31 00 39 00 30 00 35 00 36 00 38 00 35 00 30 00 30 00 30 00 2F 00 36 00 33 00 37 00 32 00 30 00 37 00 39 00 34 00 33 00 34 00 33 00 31 00 39 00 32 00 31 00 32 00 30 00 35 00 2E 00 70 00 6E 00 67 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 21 37 CC 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 04 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 F1 31 7C 5E 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 00 00 00 00 00 00 F4 01 00 00 01 32 00 00 00 00 00 00 00".ToByteArray());
            /*session.Send("4F 00 00".ToByteArray());
            session.Send("2F 00 3E FF 5A 00 00 23 06 00 00 00 06 00 00 00 06 00 00 00 08 00 00 00 08 00 00 00 08 00 00 00 01 00 00 00 01 00 00 00 01 00 00 00 02 00 00 00 02 00 00 00 02 00 00 00 3D 00 00 00 00 00 00 00 3D 00 00 00 00 00 00 00 3D 00 00 00 00 00 00 00 02 00 00 00 02 00 00 00 02 00 00 00 B8 0B 00 00 B8 0B 00 00 B8 0B 00 00 64 00 00 00 64 00 00 00 64 00 00 00 08 00 00 00 07 00 00 00 08 00 00 00 F4 01 00 00 F4 01 00 00 F4 01 00 00 78 00 00 00 78 00 00 00 78 00 00 00 0A 00 00 00 0A 00 00 00 0A 00 00 00 F4 01 00 00 F4 01 00 00 F4 01 00 00 64 00 00 00 64 00 00 00 64 00 00 00 64 00 00 00 64 00 00 00 64 00 00 00 52 00 00 00 52 00 00 00 52 00 00 00 4D 00 00 00 4D 00 00 00 4D 00 00 00 37 00 00 00 37 00 00 00 37 00 00 00 FA 00 00 00 FA 00 00 00 FA 00 00 00 32 00 00 00 32 00 00 00 32 00 00 00 01 00 00 00 01 00 00 00 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 64 00 00 00 64 00 00 00 64 00 00 00 06 00 00 00 06 00 00 00 06 00 00 00 01 00 00 00 01 00 00 00 01 00 00 00 01 00 00 00 01 00 00 00 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 64 00 00 00 64 00 00 00 64 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00".ToByteArray());
            session.Send("4F 00 02 02 00 00 00 D0 07 00 00 01 00 00 00 00 00 00 00 00 00 80 3F E8 03 00 00 01 00 00 00 00 00 00 00 00 00 80 3F".ToByteArray());
            session.Send("CC 00 00 00 00 00 00".ToByteArray());
            session.Send("37 00 3E FF 5A 00 05".ToByteArray());
            session.Send("34 00 3E FF 5A 00 00 00 00 00 00 00 00 00".ToByteArray());
            session.Send("46 00 00 00 00 00 00 04 00 00 00 01 00 00 00 00 00 00 00 02 00 00 00 00 00 00 00 03 00 00 00 00 00 00 00 04 00 00 00 00 00 00 00".ToByteArray());
            session.Send("46 00 01 00 00 00 00 00 00 00 00".ToByteArray());
            session.Send("45 00 00 00 00 00 03 00 00 00 01 00 00 00 02 00 00 00 00 00 00 00 00 00 01 00 00 00 00 00 02 00 00 00 02 00 00 00 00 00 00 00 00 00 01 00 00 00 00 00 03 00 00 00 00 00 00 00".ToByteArray());*/
            //session.Send("B8 00 16 12 00 00 00 E8 03 00 00 00 00 00 00 00 00 00 00".ToByteArray());
            //session.Send("68 00 01 01".ToByteArray());
            //session.Send("68 00 03 04 00 00 00 00 00 00 00".ToByteArray());
            //session.Send("19 00 00 65 00 00 00 29 7C 7D 01 0C 4D A1 6F 01 0C D3 1A 5F 01 0C EF 03 00 00 01 A2 3C 31 01 0C 3F 0C B7 0D 01 6B 55 5F 01 0C 3A 77 31 01 0C B1 98 BA 01 0C 03 90 5F 01 0C F9 7A 40 01 0C 91 B5 40 01 0C F9 57 31 01 0C 2F C7 BB 0D 01 81 97 7D 01 0C C2 70 5F 01 0C 51 96 40 01 0C B9 38 31 01 0C 41 78 7D 01 0C 65 9D 6F 01 0C 83 51 5F 01 0C 52 73 31 01 0C FF E0 B8 0D 01 11 77 40 01 0C A9 B1 40 01 0C 11 54 31 01 0C DA 6C 5F 01 0C 69 92 40 01 0C D1 34 31 01 0C 7D 99 6F 01 0C 03 13 5F 01 0C 69 6F 31 01 0C 32 88 5F 01 0C 9B 4D 5F 01 0C FF 6F B6 0D 01 29 73 40 01 0C C1 AD 40 01 0C 29 50 31 01 0C 81 8E 40 01 0C E9 30 31 01 0C 09 CE 8C 01 0C 95 95 6F 01 0C 1B 0F 5F 01 0C 4A 84 5F 01 0C B3 49 5F 01 0C 82 6B 31 01 0C 4F 15 BC 0D 01 F9 8C BA 01 00 D9 A9 40 01 0C 41 4C 31 01 0C EF B9 B8 0D 01 99 8A 40 01 0C 21 CA 8C 01 0C 01 AD 6F 01 0C 33 0B 5F 01 0C 99 67 31 01 0C 62 80 5F 01 0C CB 45 5F 01 0C 79 08 9C 01 0C F1 A5 40 01 0C E1 87 7D 01 0C BB 9B 5F 01 0C B1 86 40 01 0C 39 C6 8C 01 0C 7A 7C 5F 01 0C B2 63 31 01 0C 29 85 BA 01 0E 91 04 9C 01 0C 09 A2 40 01 0C 71 44 31 01 0C F9 83 7D 01 0C 1D A9 6F 01 0C D3 97 5F 01 0C C9 82 40 01 0C 51 C2 8C 01 0C 61 BD 40 01 0C C9 5F 31 01 0C 51 9F 7D 01 0C 92 78 5F 01 0C 0F 08 B9 0D 01 A9 00 9C 01 0C 89 40 31 01 0C 11 80 7D 01 0C 35 A5 6F 01 0C BB 1E 5F 01 0C 53 59 5F 01 0C E9 03 00 00 01 22 7B 31 01 0C EB 93 5F 01 0C EA 03 00 00 01 E1 7E 40 01 0C 69 BE 8C 01 0C 79 B9 40 01 0C E1 5B 31 01 0C EB 03 00 00 01 69 9B 7D 01 0C AA 74 5F 01 0C EC 03 00 00 01 ED 03 00 00 01 C1 FC 9B 01 0C EE 03 00 00 01".ToByteArray());
            //session.Send("".ToByteArray());
        }
    }
}
